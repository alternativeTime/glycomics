@(result: List[Translation], structure: List[Structure], taxonomy: ArrayList[String], structureObject: Structure, listSub: List[com.avaje.ebean.SqlRow])
@import helper._


@main{

    <ul class="breadcrumb">
      <li><i class="icon-home" ></i><a href="/"> UniCarbKB</a> <span class="divider">></span></li>
      <li><i class="icon-wrench" ></i><a href="/builder"> Glycan Builder</a> <span class="divider">></span></li>
      <li class='active'><i class='icon-search'></i> Glycan Search</span></li>
    </ul>

    <section id="layouts" class="browse">

      <div class="page-header row-fluid">
        <h1>Glycan Search</h1>
        <h4 class="subheader">Currently returning results from GlycosuiteDB, EuroCarb, and GlycoBase</h4>
      </div>

      <div class="row-fluid">
        <div class="span3 search">
          <div class="filterbar tabbable">
            <ul class="nav nav-tabs" id="myTabBar">
              <li class='title'>Database filter coming soon: <span class="pull-right count"></span></li>
              <li class='title'>Glycosuite <span class="pull-right count"></span></li>
              <li class='title'>EuroCarb</li>
              <li class='title'>GlycoBase</li>
            </ul>
          </div><!-- /col -->
          <div class="info">
            <h4>Other Options:</h4>
            <p><b>UniCarbKB Search:</b> Search UniCarbKB by Taxonomy, Tissue, Protein, or Composition with <a href="/query">our filtering system</a>.</p>
            <p><b>Curated Publications:</b> Search the <a href="/references">growing list of publications, associated structures, and metadata</a>.</p>
          </div>
        </div>
        <div class="span9">
          <div class="tabbable"> <!-- Only required for left/right tabs -->
            @*<ul class="nav nav-tabs" id="myTab">
              <li class="active"><a href="#tab1" data-toggle="tab">Search</a></li>
              <li><a href="#tab2" data-toggle="tab">Search Results</a></li>
              <li><a href="#tab3" data-toggle="tab">Related Results</a></li>
	      <li><a href="" data-toggle="tab">Glycan Builder</a></li>
            </ul>*@
            <div class="tab-content results">
              <div class="tab-pane active" id="tab1">
                <a class='btn pull-right' href="/builder"><i class="icon-refresh"></i> New Glycan</a>
		@for(result <- result){
		 <a href="/structure/@result.gs"><img src="http://www.glycodigest.org:8123/eurocarb/get_sugar_image.action?download=true&scale=1.0&outputType=png&inputType=gws&tolerateUnknown=1&sequences=@{result.gws}" /></a>
		}
    @if(structureObject != null ) {
    <div class='callout'>
      <h3>Search returned 
        <small>
          <span class='icon-book icon-white'></span> @structureObject.references.size() References, 
          <span class='icon-leaf icon-white'></span> @structureObject.strtaxonomy.size() Biological Associations, 
          <span class='icon-map-marker icon-white'></span> @structureObject.stsource.size() Proteins
        </small>
      </h3>
    </div>
    } else {
	<h3>Search returned</h3>
	<p>The structure submitted could not be found! <br/>Only structures completely matching the submitted glycan topology will be returned.</p>
    }

    <hr>

    @if(structure != null ) {
    <div class='row-fluid'>
      <h3>Publications</h3>
      <div class="details span9">
        @for(stref <- structure){
          @for( (reference,i) <- stref.references.zipWithIndex; if (i <=3)){
            <p><a href="../references/@reference.reference.id">@reference.reference.title</a>, @reference.reference.year, @reference.reference.authors</p>
          }
        }
      </div>
    </div>
    }

    <hr>
	
    @if(structureObject != null ) {
    <div class="row-fluid">
      <h3>Biological Associations</h3>
      <div class="details span9">
        @for( (tax,j) <- taxonomy.zipWithIndex; if (j <=3)){
        <a href="" style="font-size: 14px; font-weight: normal; line-height: 22px; margin-bottom: 9px; color: #4B5C66;">@tax, </a> 
		    }
      </div>
    </div>
    }

    <hr>

    @if(listSub.size() > 0) {
    <div class="row-fluid">
    <h3>GlycoSuite Substructure Matches @listSub.size()</h3>
    <div class="details span9">
    <p>The following structures contain features of the submitted glycan. For more information select one of the entries.</p>
    @for(l <- listSub) { 
        <a href="/structure/@{l.get("gs_id")}"><img src="http://www.glycodigest.org:8123/eurocarb/get_sugar_image.action?download=true&scale=1.0&outputType=png&inputType=gws&tolerateUnknown=1&sequences=@{l.get("sequence_gws")}" /></a>
    }
    </div>
    }
  </div>


              </div>
            </div>
          </div>
        </div><!-- /col -->
      </div><!-- /row -->
    </section>

<script>
        $(function () {
        var test = 'second'; @* target this during page reload *@
        $('#myTabBar a:' + test).tab('show');
        })
</script>


}

